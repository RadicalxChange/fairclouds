<label class="flex items-center cursor-pointer">
  <input
    id="themeToggle"
    type="checkbox"
    value="accessible"
    class="sr-only peer"
  />
  <div
    class="relative w-[81px] h-[45px] bg-primary shadow-cloud peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full after:content-[''] after:absolute after:top-[5px] after:start-[6px] after:bg-white after:rounded-full after:h-[35px] after:w-[35px] after:transition-all"
  >
  </div>
  <span
    class="sr-only ms-3 text-sm font-medium text-gray-900 dark:text-gray-300"
    >Accessibility mode toggle me</span
  >
</label>

<script is:inline>
  const theme = (() => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
      return localStorage.getItem("theme");
    }
  })();

  console.log(theme);

  if (theme === "accessible") {
    document.documentElement.classList.add("accessible");
    document.getElementById("themeToggle").checked = true;
  }

  window.localStorage.setItem("theme", theme);

  const handleToggleClick = (e) => {
    const element = document.documentElement;
    element.classList.toggle("accessible");

    const isAccessible = element.classList.contains("accessible");
    localStorage.setItem("theme", isAccessible ? "normal" : "accessible");
    console.log(e);
    console.log(isAccessible);
  };

  document
    .getElementById("themeToggle")
    .addEventListener("change", handleToggleClick);
</script>
